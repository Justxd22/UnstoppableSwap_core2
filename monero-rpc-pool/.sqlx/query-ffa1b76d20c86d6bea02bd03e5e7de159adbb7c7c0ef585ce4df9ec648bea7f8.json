{
  "db_name": "SQLite",
  "query": "\n            SELECT \n                COUNT(*) as total,\n                CAST(SUM(CASE WHEN stats.success_count > 0 THEN 1 ELSE 0 END) AS INTEGER) as \"reachable!: i64\",\n                CAST((SELECT COUNT(*) FROM (\n                    SELECT n2.id\n                    FROM monero_nodes n2\n                    LEFT JOIN (\n                        SELECT \n                            node_id,\n                            SUM(CASE WHEN was_successful THEN 1 ELSE 0 END) as success_count,\n                            SUM(CASE WHEN NOT was_successful THEN 1 ELSE 0 END) as failure_count,\n                            AVG(CASE WHEN was_successful AND latency_ms IS NOT NULL THEN latency_ms END) as avg_latency_ms\n                        FROM health_checks \n                        GROUP BY node_id\n                    ) s2 ON n2.id = s2.node_id\n                    WHERE n2.network = ? AND (COALESCE(s2.success_count, 0) + COALESCE(s2.failure_count, 0)) > 0\n                    ORDER BY \n                        (CAST(COALESCE(s2.success_count, 0) AS REAL) / CAST(COALESCE(s2.success_count, 0) + COALESCE(s2.failure_count, 0) AS REAL)) * \n                        (MIN(COALESCE(s2.success_count, 0) + COALESCE(s2.failure_count, 0), 200) / 200.0) * 0.8 +\n                        CASE \n                            WHEN s2.avg_latency_ms IS NOT NULL THEN (1.0 - (MIN(s2.avg_latency_ms, 2000) / 2000.0)) * 0.2\n                            ELSE 0.0 \n                        END DESC\n                    LIMIT 4\n                )) AS INTEGER) as \"reliable!: i64\"\n            FROM monero_nodes n\n            LEFT JOIN (\n                SELECT \n                    node_id,\n                    SUM(CASE WHEN was_successful THEN 1 ELSE 0 END) as success_count,\n                    SUM(CASE WHEN NOT was_successful THEN 1 ELSE 0 END) as failure_count\n                FROM health_checks \n                GROUP BY node_id\n            ) stats ON n.id = stats.node_id\n            WHERE n.network = ?\n            ",
  "describe": {
    "columns": [
      {
        "name": "total",
        "ordinal": 0,
        "type_info": "Integer"
      },
      {
        "name": "reachable!: i64",
        "ordinal": 1,
        "type_info": "Integer"
      },
      {
        "name": "reliable!: i64",
        "ordinal": 2,
        "type_info": "Integer"
      }
    ],
    "parameters": {
      "Right": 2
    },
    "nullable": [
      false,
      true,
      false
    ]
  },
  "hash": "ffa1b76d20c86d6bea02bd03e5e7de159adbb7c7c0ef585ce4df9ec648bea7f8"
}
